<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–î–æ—Ä–æ–∂–Ω—è –∫–∞—Ä—Ç–∞ PhD</title>
  <style>
    :root{--bg:#f6f9fc;--card:#fff;--accent:#6c8ebf;--muted:#6b7280}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; background:var(--bg); margin:0; padding:32px; color:#111}
    .container{max-width:900px;margin:0 auto;}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;flex-wrap:wrap}
    h1{font-size:20px;margin:0; flex:1}
    .controls{display:flex;gap:8px;align-items:center;margin-top:8px;}
    button, .btn{background:var(--accent);border:none;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    .btn--muted{background:#e6eef9;color:#123}
    .timeline{position:relative;padding:10px 0 40px;}
    .line{position:absolute;left:48px;top:0;bottom:0;width:4px;background:linear-gradient(#6c8ebf,#9fb9e6);border-radius:2px}
    .item{position:relative;padding:18px 18px 18px 96px; margin-bottom:18px;background:transparent;}
    .node{position:absolute;left:24px;top:18px;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#fff;border:3px solid var(--accent);box-shadow:0 2px 6px rgba(20,40,80,0.06)}
    .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(20,40,80,0.06);}
    .meta{font-size:13px;color:var(--muted);margin-bottom:6px}
    .title{font-weight:700;margin:0 0 6px 0}
    .desc{margin:0;color:#333;white-space:pre-wrap}
    .actions{margin-top:10px;display:flex;gap:8px}
    .search{padding:8px 10px;border-radius:8px;border:1px solid #d7e4f5;width:340px}
    .lang-toggle{padding:6px 8px;border-radius:8px;border:1px solid #d7e4f5;background:#e6eef9; color: #123; cursor:pointer}
    footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}
    .highlight{background:linear-gradient(90deg,#fffbe6,#fff);padding:6px;border-radius:8px}
    .btn.btn--muted {text-decoration: none;font-size: 14px; color: #123;}
    input[type="date"]{padding:6px;border-radius:8px;border:1px solid #d7e4f5}
    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(8,12,20,0.45);z-index:50;padding:20px}
    .modal .dialog{max-width:780px;width:100%;background:#fff;border-radius:12px;padding:18px;box-shadow:0 24px 60px rgba(10,20,40,0.5)}
    .close{float:right;background:#eee;border-radius:8px;padding:6px;cursor:pointer;border:none}
    .badge{display:inline-block;background:#eef6ff;color:#135; padding:6px 8px;border-radius:999px;font-weight:700;font-size:13px;margin-right:8px}
    .desc a { background-color: #d7e4f5; color: #6c8ebf; padding: 1px 3px; border-radius: 6px; font-size: 14px; text-decoration: none; font-weight: 500; transition: background 0.2s, color 0.2s; }
    .desc a:hover { background-color: #cfe0f8; color: #123;}
    .calendar-header {
    display:flex;
    justify-content:center;
    align-items:center;
    gap:8px;
    margin-bottom:8px;
  }
  .calendar-view {
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    gap:4px;
    background:#fff;
    border-radius:12px;
    padding:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.05);
  }
  .calendar-weekday {
    text-align:center;
    font-weight:700;
    padding-bottom:6px;
    font-size:13px;
    color:#333;
  }
  .day-cell {
    min-height:90px;
    border:1px solid #e0e6ef;
    border-radius:8px;
    padding:4px;
    font-size:12px;
    position:relative;
    overflow:hidden;
  }
  .day-cell span.date {
    font-weight:700;
    color:#444;
    font-size:12px;
  }
  .event {
    display:block;
    font-size:11px;
    padding:2px 4px;
    margin-top:2px;
    border-radius:4px;
    color:#fff;
    overflow:hidden;
    white-space:nowrap;
    text-overflow:ellipsis;
  }
  .day-other {
    opacity:0.4;
  }
  .controls { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; justify-content: flex-start; margin-bottom: 12px; }
  .controls input, .controls button { flex-shrink: 0;}
  .search { flex: 1 1 160px; min-width: 120px; }
  @media (max-width:640px){.line{left:28px}.item{padding-left:76px}.node{left:6px} .search{width:160px}}
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>
      ¬´–î–û–†–û–ñ–ù–Ø –ö–ê–†–¢–ê¬ª
      <br>
      –∑–¥–æ–±—É–≤–∞—á–∞ —Å—Ç—É–ø–µ–Ω—è –¥–æ–∫—Ç–æ—Ä–∞ —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó
      <br>
      –¥–æ –∑–∞—Ö–∏—Å—Ç—É –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó —É —Ä–∞–∑–æ–≤—ñ–π —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ–π –≤—á–µ–Ω—ñ–π —Ä–∞–¥—ñ
    </h1>
    <div class="controls">
      <input id="search" class="search" placeholder="–ü–æ—à—É–∫ –µ—Ç–∞–ø—É‚Ä¶" />
      <input type="date" id="seminar-date" title="–î–∞—Ç–∞ —Å–µ–º—ñ–Ω–∞—Ä—É" />
      <button id="set-dates" class="btn">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –¥–∞—Ç–∏</button>
      <button id="print" class="btn">–î—Ä—É–∫ / Export</button>
      <button id="lang" class="lang-toggle">EN</button>
    </div>
  </header>

  <main>
    <h2 style="margin-top:40px;">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä –µ—Ç–∞–ø—ñ–≤</h2>
<div class="calendar-header">
  <button id="prev-month" class="btn btn--muted">‚Üê</button>
  <span id="calendar-title" style="font-weight:700;font-size:16px"></span>
  <button id="next-month" class="btn btn--muted">‚Üí</button>
</div>
<div id="calendar-view" class="calendar-view"></div>

    <section class="timeline" id="timeline">
      <div class="line" aria-hidden="true"></div>
    </section>
  </main>

  <footer>
    Built from the submitted roadmap. Click a step to view details. Use EN toggle to switch language.
  </footer>
</div>

<!-- modal for details -->
<div id="modal" class="modal" role="dialog" aria-hidden="true">
  <div class="dialog" role="document">
    <button id="close" class="close">‚úï</button>
    <div id="modal-content"></div>
  </div>
</div>

<script>
const steps = [
  { id: 1, email: 'olha.zhak@lnu.edu.ua',
    uk: { title: '–†–∞–∑–æ–≤–∞ —Ä–∞–¥–∞ —É—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞–∫–ª–∞–¥–æ–º', detail: '–†–∞–∑–æ–≤–∞ —Ä–∞–¥–∞ —É—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞–∫–ª–∞–¥–æ–º, –≤ —è–∫–æ–º—É –∑–¥–æ–±—É–≤–∞—á –≤–∏–∫–æ–Ω–∞–≤ –∞–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω—É –æ—Å–≤—ñ—Ç–Ω—å–æ–Ω–∞—É–∫–æ–≤—É –ø—Ä–æ–≥—Ä–∞–º—É.' },
    en: { title: 'Formation of the one-time board', detail: 'The one-time board is formed by the institution where the candidate completed the accredited educational and research program.' }
  },
  { id: 2,  parent: 1,
    uk: { title: '–ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—è –¥–æ —ñ–Ω—à–æ–≥–æ –∑–∞–∫–ª–∞–¥—É', detail: '–ó–¥–æ–±—É–≤–∞—á, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î –Ω–µ–∞–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω—É –æ—Å–≤—ñ—Ç–Ω—å–æ-–Ω–∞—É–∫–æ–≤—É –ø—Ä–æ–≥—Ä–∞–º—É, –º–∞—î –ø—Ä–∞–≤–æ —É –ø–æ—Ä—è–¥–∫—É, –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞–≤—Å—Ç–≤–æ–º, –Ω–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—è –¥–æ —ñ–Ω—à–æ–≥–æ –∑–∞–∫–ª–∞–¥—É, —è–∫–∏–π –º–∞—î –∞–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω—É –æ—Å–≤—ñ—Ç–Ω—å–æ-–Ω–∞—É–∫–æ–≤—É –ø—Ä–æ–≥—Ä–∞–º—É –∑–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—é —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ—Å—Ç—é.' },
    en: { title: 'Transfer to another institution', detail: 'Candidates enrolled in a non-accredited program have the right to transfer to an institution with an accredited educational and research program in the corresponding specialty.' }
  },
  { id: 3,  email: 'postgraduate.dep@lnu.edu.ua',
    uk: { title: '–û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–≤—ñ–¥–∫–∏ –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏', detail: '–ó–¥–æ–±—É–≤–∞—á, —è–∫–∏–π –≤–∏–∫–æ–Ω–∞–≤ –∞–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω—É –æ—Å–≤—ñ—Ç–Ω—å–æ-–Ω–∞—É–∫–æ–≤—É –ø—Ä–æ–≥—Ä–∞–º—É, —Å–∫–ª–∞–≤ —É—Å—ñ –∑–∞–ª—ñ–∫–∏ —Ç–∞ —ñ—Å–ø–∏—Ç–∏, –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –≤—ñ–¥–¥—ñ–ª—É –∞—Å–ø—ñ—Ä–∞–Ω—Ç—É—Ä–∏ —ñ –¥–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–≤—ñ–¥–∫–∏ –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ—Å–≤—ñ—Ç–Ω—å–æ-–Ω–∞—É–∫–æ–≤–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏.' },
    en: { title: 'Obtaining certificate of completion', detail: 'The candidate who completed the accredited program applies to the postgraduate department to obtain a certificate of program completion.' }
  },
  {
  id: 4,
  uk: { title: '–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó', detail: '–ó–¥–æ–±—É–≤–∞—á –≥–æ—Ç—É—î —Ä—É–∫–æ–ø–∏—Å –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó —É –¥—Ä—É–∫–æ–≤–∞–Ω–æ–º—É —Ç–∞ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ, –∞–Ω–æ—Ç–∞—Ü—ñ—é –¥–æ –Ω–µ—ó (–∑–≥—ñ–¥–Ω–æ –∑ –≤–∏–º–æ–≥–∞–º–∏ –ú—ñ–Ω—ñ—Å—Ç–µ—Ä—Å—Ç–≤–∞ –æ—Å–≤—ñ—Ç–∏ —Ç–∞ –Ω–∞—É–∫–∏ –£–∫—Ä–∞—ó–Ω–∏), –ø–µ—Ä–µ–ª—ñ–∫ —Ç–∞ –∫–æ–ø—ñ—ó –Ω–∞—É–∫–æ–≤–∏—Ö —Å—Ç–∞—Ç–µ–π (–¥–∏–≤. –î–æ–¥–∞—Ç–æ–∫ 1), –¥–µ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ –æ—Å–Ω–æ–≤–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ–π–Ω–æ–≥–æ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è, —Ç–∞ –æ—Ç—Ä–∏–º—É—î –≤–∏—Å–Ω–æ–≤–æ–∫ –Ω–∞—É–∫–æ–≤–æ–≥–æ –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞ (–∫–µ—Ä—ñ–≤–Ω–∏–∫—ñ–≤).' },
  en: { title: 'Dissertation preparation', detail: 'Candidate prepares the dissertation manuscript in print and electronic formats, an abstract according to the Ministry of Education and Science of Ukraine requirements, a list and copies of publications (see Appendix 1) presenting the main results of the dissertation research, and obtains the supervisor‚Äôs review.'}
  },
  { id: 5, parent: 4,
    uk: { title: '–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –Ω–∞—É–∫–æ–≤–∏—Ö –ø—Ä–∞—Ü—å', detail: '–ù–µ –≤–≤–∞–∂–∞—î—Ç—å—Å—è —Å–∞–º–æ–ø–ª–∞–≥—ñ–∞—Ç–æ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–¥–æ–±—É–≤–∞—á–µ–º —Å–≤–æ—ó—Ö –Ω–∞—É–∫–æ–≤–∏—Ö –ø—Ä–∞—Ü—å —É —Ç–µ–∫—Å—Ç—ñ –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó –±–µ–∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ü—ñ –ø—Ä–∞—Ü—ñ, —è–∫—â–æ –≤–æ–Ω–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ –∑ –º–µ—Ç–æ—é –≤–∏—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.' },
    en: { title: 'Use of own publications', detail: 'Using one‚Äôs own previously published works in the dissertation is not considered self-plagiarism if the main results are highlighted and included in the abstract.' }
  },
  { id: 6,
    uk: { title: '–ó–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –¥–µ–∫–∞–Ω–∞', detail: '–ó–¥–æ–±—É–≤–∞—á –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –¥–µ–∫–∞–Ω–∞ –∑ –ø–∏—Å—å–º–æ–≤–æ—é –∑–∞—è–≤–æ—é —â–æ–¥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–∏—Å–Ω–æ–≤–∫—É –ø—Ä–æ –Ω–∞—É–∫–æ–≤—É –Ω–æ–≤–∏–∑–Ω—É; –¥–æ–¥–∞—é—Ç—å—Å—è –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—è, –∞–Ω–æ—Ç–∞—Ü—ñ—è, –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó, –≤–∏—Å–Ω–æ–≤–æ–∫ –Ω–∞—É–∫–æ–≤–æ–≥–æ –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞, –¥–æ–≤—ñ–¥–∫–∞ –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏.' },
    en: { title: 'Submission to the Dean', detail: 'Candidate submits an application to the Dean to obtain conclusion on novelty; includes dissertation, abstract, publications, supervisor‚Äôs review, certificate of completion.' }
  },
  { id: 7,
    uk: { title: '–ü—É–±–ª—ñ—á–Ω–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è –Ω–∞ –∫–∞—Ñ–µ–¥—Ä—ñ', detail: '–ü—É–±–ª—ñ—á–Ω–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è –∑–¥–æ–±—É–≤–∞—á–µ–º –Ω–∞—É–∫–æ–≤–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó —Ç–∞ —ó—ó –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –Ω–∞ –∑–∞—Å—ñ–¥–∞–Ω–Ω—ñ –∫–∞—Ñ–µ–¥—Ä–∏.' },
    en: { title: 'Department presentation', detail: 'Candidate presents research results publicly at the Department meeting and discussion is held.' }
  },
  { id: 8, duration:14,
    uk: { title: '–ó–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –≤—á–µ–Ω–æ—ó —Ä–∞–¥–∏', detail: '–ó–∞ —É–º–æ–≤–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–≥–æ –≤–∏—Å–Ω–æ–≤–∫—É –∑–¥–æ–±—É–≤–∞—á –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –≤—á–µ–Ω–æ—ó —Ä–∞–¥–∏ –∑ –∑–∞—è–≤–æ—é –ø—Ä–æ —É—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–∞–∑–æ–≤–æ—ó —Ä–∞–¥–∏ —Ç–∞ –¥–æ–¥–∞—î –¥–æ–∫—É–º–µ–Ω—Ç–∏.' },
    en: { title: 'Academic Council submission', detail: 'Upon positive conclusion, candidate applies to Academic Council for creation of one-time board with supporting documents.' }
  },
  { id: 9, parent: 8, duration:60,
    uk: { title: '–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —Å–∫–ª–∞–¥—É —Ä–∞–¥–∏', detail: '–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —â–æ–¥–æ —Å–∫–ª–∞–¥—É —Ä–∞–∑–æ–≤–æ—ó —Ä–∞–¥–∏ –ø–æ–¥–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∏–π –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª, –Ω–∞ –∑–∞—Å—ñ–¥–∞–Ω–Ω—ñ —è–∫–æ–≥–æ –±—É–ª–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è.' },
    en: { title: 'Board composition proposals', detail: 'Department proposes personal composition of the board at the meeting where the presentation took place.' }
  },
  { id: 10,
    uk: { title: '–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ù–î–ß', detail: '–í—á–µ–Ω–∏–π —Å–µ–∫—Ä–µ—Ç–∞—Ä –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –Ω–∞—É–∫–æ–≤–æ–≥–æ –¥–æ—Ä–æ–±–∫—É —á–ª–µ–Ω—ñ–≤ —Ä–∞–¥–∏ –≤–∏–º–æ–≥–∞–º –ü–æ—Ä—è–¥–∫—É —Ç–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø–æ—Ä—É—à–µ–Ω—å –∞–∫–∞–¥–µ–º—ñ—á–Ω–æ—ó –¥–æ–±—Ä–æ—á–µ—Å–Ω–æ—Å—Ç—ñ.' },
    en: { title: 'Secretary verification', detail: 'Research secretary verifies board members‚Äô compliance with regulations and absence of academic misconduct.' }
  },
  { id: 11,
    uk: { title: '–£—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–∞–∑–æ–≤–æ—ó —Ä–∞–¥–∏', detail: '–í—á–µ–Ω–∞ —Ä–∞–¥–∞ —É—Ç–≤–æ—Ä—é—î —Ä–∞–∑–æ–≤—É —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—É —Ä–∞–¥—É —É —Å–∫–ª–∞–¥—ñ –ø‚Äô—è—Ç–∏ –æ—Å—ñ–± —ñ –≤–∏–¥–∞—î –Ω–∞–∫–∞–∑.' },
    en: { title: 'Board formation', detail: 'Academic Council forms one-time board of five members and issues an official order.' }
  },
  { id: 12, parent: 11,
    uk: { title: '–û—Ñ—ñ—Ü—ñ–π–Ω—ñ –æ–ø–æ–Ω–µ–Ω—Ç–∏', detail: '–û—Ñ—ñ—Ü—ñ–π–Ω—ñ –æ–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–µ –º–æ–∂—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ –æ–¥–Ω–æ–º—É –∑–∞–∫–ª–∞–¥—ñ —Ç–∞ –º–∞—é—Ç—å –ø–∏—Å—å–º–æ–≤—É –∑–≥–æ–¥—É –Ω–∞ —É—á–∞—Å—Ç—å —É —Ä–∞–¥—ñ.' },
    en: { title: 'Official opponents', detail: 'Official opponents cannot work at the same institution and must give written consent to participate.' }
  },
  { id: 13, duration: 5,
    uk: { title: '–û–ø—Ä–∏–ª—é–¥–Ω–µ–Ω–Ω—è –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤', detail: '–ü—Ä–æ—Ç—è–≥–æ–º –ø‚Äô—è—Ç–∏ –¥–Ω—ñ–≤ –ø—ñ—Å–ª—è –Ω–∞–∫–∞–∑—É –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ —Ä–æ–∑–º—ñ—â—É—é—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç—ñ —Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö.' },
    en: { title: 'Publication of materials', detail: 'Within five days of the order, materials are published on website and in information systems.' }
  },
  { id: 14, duration: 30,
    uk: { title: '–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ú–û–ù', detail: '–ú—ñ–Ω—ñ—Å—Ç–µ—Ä—Å—Ç–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Å–∫–ª–∞–¥—É —Ä–∞–∑–æ–≤–æ—ó —Ä–∞–¥–∏ –ø—Ä–æ—Ç—è–≥–æ–º –º—ñ—Å—è—Ü—è.' },
    en: { title: 'Ministry verification', detail: 'Ministry of Education checks board composition compliance within one month.' }
  },
  { id: 15, duration: 45,
    uk: { title: '–†–µ—Ü–µ–Ω–∑—ñ—ó —Ç–∞ –≤—ñ–¥–≥—É–∫–∏', detail: '–†–µ—Ü–µ–Ω–∑–µ–Ω—Ç–∏ —Ç–∞ –æ—Ñ—ñ—Ü—ñ–π–Ω—ñ –æ–ø–æ–Ω–µ–Ω—Ç–∏ –ø–æ–¥–∞—é—Ç—å —Ä–µ—Ü–µ–Ω–∑—ñ—ó —Ç–∞ –≤—ñ–¥–≥—É–∫–∏ –ø—Ä–æ—Ç—è–≥–æ–º 45 –¥–Ω—ñ–≤ –ø—ñ—Å–ª—è –æ–ø—Ä–∏–ª—é–¥–Ω–µ–Ω–Ω—è.' },
    en: { title: 'Reviewers reports', detail: 'Reviewers and official opponents submit reports and feedback within 45 days after publication.' }
  },
  { id: 16, duration: 3,
    uk: { title: '–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥–∞—Ç–∏ –∑–∞—Ö–∏—Å—Ç—É', detail: '–†–∞–∑–æ–≤–∞ —Ä–∞–¥–∞ –ø—Ä–∏–∑–Ω–∞—á–∞—î –¥–∞—Ç—É, —á–∞—Å —ñ –º—ñ—Å—Ü–µ –∑–∞—Ö–∏—Å—Ç—É –ø—Ä–æ—Ç—è–≥–æ–º —Ç—Ä—å–æ—Ö —Ä–æ–±–æ—á–∏—Ö –¥–Ω—ñ–≤ –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Ä–µ—Ü–µ–Ω–∑—ñ—ó.' },
    en: { title: 'Scheduling defense', detail: 'Board schedules date, time, and place of defense within three working days after last review is received.' }
  },
  { id: 17,
    uk: { title: '–ü—É–±–ª—ñ—á–Ω–∏–π –∑–∞—Ö–∏—Å—Ç', detail: '–ü—É–±–ª—ñ—á–Ω–∏–π –∑–∞—Ö–∏—Å—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è –Ω–∞ –∑–∞—Å—ñ–¥–∞–Ω–Ω—ñ —Ä–∞–∑–æ–≤–æ—ó —Ä–∞–¥–∏ –∑–∞ —É–º–æ–≤–∏ —É—á–∞—Å—Ç—ñ –ø–æ–≤–Ω–æ–≥–æ —Å–∫–ª–∞–¥—É.' },
    en: { title: 'Public defense', detail: 'Public defense held at board meeting with full board participation.' }
  },
  { id: 18, parent: 17,
    uk: { title: '–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∫–≤–æ—Ä—É–º—É', detail: '–£ —Ä–∞–∑—ñ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –∫–≤–æ—Ä—É–º—É –¥–∞—Ç–∞ –∑–∞—Ö–∏—Å—Ç—É –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–µ —Ä–∞–Ω—ñ—à–µ –Ω—ñ–∂ —á–µ—Ä–µ–∑ 2 —Ç–∏–∂–Ω—ñ —Ç–∞ –Ω–µ –ø—ñ–∑–Ω—ñ—à–µ –Ω—ñ–∂ —á–µ—Ä–µ–∑ 4 —Ç–∏–∂–Ω—ñ.' },
    en: { title: 'No quorum', detail: 'If quorum is missing, defense date is rescheduled between 2‚Äì4 weeks from previous date.' }
  },
  { id: 19,
    uk: { title: '–¢—Ä–∞–Ω—Å–ª—è—Ü—ñ—è –∑–∞—Ö–∏—Å—Ç—É', detail: '–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç –∑–∞–±–µ–∑–ø–µ—á—É—î —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é —Ç–∞ –≤—ñ–¥–µ–æ–∑–∞–ø–∏—Å –∑–∞—Ö–∏—Å—Ç—É –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó.' },
    en: { title: 'Defense streaming', detail: 'University provides live streaming and recording of the dissertation defense.' }
  },
  { id: 20,
    uk: { title: '–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –∑–∞—Ö–∏—Å—Ç—É', detail: '–ó–∞—Å—ñ–¥–∞–Ω–Ω—è –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è –∑–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–æ—é –£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç—É, –∑–∞—Ö–∏—Å—Ç –º–∞—î —Ö–∞—Ä–∞–∫—Ç–µ—Ä –≤—ñ–¥–∫—Ä–∏—Ç–æ—ó –¥–∏—Å–∫—É—Å—ñ—ó.' },
    en: { title: 'Defense procedure', detail: 'Meeting follows University procedure; defense is an open scientific discussion.' }
  },
  { id: 21,
    uk: { title: '–†—ñ—à–µ–Ω–Ω—è —Ä–∞–∑–æ–≤–æ—ó —Ä–∞–¥–∏', detail: '–ó–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è –æ—Ñ–æ—Ä–º–ª—é—î—Ç—å—Å—è —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ –ø—Ä–∏—Å—É–¥–∂–µ–Ω–Ω—è –∞–±–æ –≤—ñ–¥–º–æ–≤—É.' },
    en: { title: 'Board decision', detail: 'Decision on awarding or refusal is issued based on voting results.' }
  },
  { id: 22, parent: 21,
    uk: { title: '–ó–Ω—è—Ç—Ç—è –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó —ñ–∑ –∑–∞—Ö–∏—Å—Ç—É', detail: '–ó–¥–æ–±—É–≤–∞—á –º–∞—î –ø—Ä–∞–≤–æ –¥–æ –ø–æ—á–∞—Ç–∫—É –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è –∑–Ω—è—Ç–∏ –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—é —ñ–∑ –∑–∞—Ö–∏—Å—Ç—É, –∫—Ä—ñ–º –≤–∏–ø–∞–¥–∫—ñ–≤ –ø–æ—Ä—É—à–µ–Ω–Ω—è –∞–∫–∞–¥–µ–º—ñ—á–Ω–æ—ó –¥–æ–±—Ä–æ—á–µ—Å–Ω–æ—Å—Ç—ñ.' },
    en: { title: 'Withdrawal of dissertation', detail: 'Candidate may withdraw dissertation before voting, except in cases of academic misconduct.' }
  },
  { id: 23, parent: 21,
    uk: { title: '–§–∞–∫—Ç–∏ –∞–∫–∞–¥–µ–º—ñ—á–Ω–æ–≥–æ –ø–ª–∞–≥—ñ–∞—Ç—É', detail: '–Ø–∫—â–æ –≤–∏—è–≤–ª–µ–Ω–æ —Ñ–∞–∫—Ç–∏ –ø–ª–∞–≥—ñ–∞—Ç—É, –∑–∞—è–≤—É –ø—Ä–æ –∑–Ω—è—Ç—Ç—è –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó –Ω–µ –ø—Ä–∏–π–º–∞—é—Ç—å, —Ä–∞–¥–∞ –≤—ñ–¥–º–æ–≤–ª—è—î —É –ø—Ä–∏—Å—É–¥–∂–µ–Ω–Ω—ñ.' },
    en: { title: 'Academic misconduct', detail: 'If plagiarism or falsification is found, withdrawal is denied; board refuses degree awarding.' }
  },
  { id: 24,
    uk: { title: '–û–ø—Ä–∏–ª—é–¥–Ω–µ–Ω–Ω—è —Ä—ñ—à–µ–Ω–Ω—è', detail: '–ü—Ä–æ—Ç—è–≥–æ–º —Ç—Ä—å–æ—Ö —Ä–æ–±–æ—á–∏—Ö –¥–Ω—ñ–≤ –æ–ø—Ä–∏–ª—é–¥–Ω—é—î—Ç—å—Å—è —Ä—ñ—à–µ–Ω–Ω—è —Ä–∞–∑–æ–≤–æ—ó —Ä–∞–¥–∏ —Ç–∞ –≤—ñ–¥–µ–æ–∑–∞–ø–∏—Å —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó –∑–∞—Ö–∏—Å—Ç—É.' },
    en: { title: 'Publication of decision', detail: 'Within three working days, board decision and defense recording are published.' }
  },
  { id: 25, duration: 15,
    uk: { title: '–ù–∞–∫–∞–∑ –ø—Ä–æ –≤–∏–¥–∞—á—É –¥–∏–ø–ª–æ–º–∞', detail: '–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç –≤–∏–¥–∞—î –Ω–∞–∫–∞–∑ –ø—Ä–æ –≤–∏–¥–∞—á—É –¥–∏–ø–ª–æ–º–∞ –¥–æ–∫—Ç–æ—Ä–∞ —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó –ø—Ä–æ—Ç—è–≥–æ–º 15‚Äì30 –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∏—Ö –¥–Ω—ñ–≤.' },
    en: { title: 'Order and diploma issuance', detail: 'University issues order for PhD diploma within 15‚Äì30 calendar days.' }
  },
  { id: 26,
    uk: { title: '–ù–∞–±—Ä–∞–Ω–Ω—è —á–∏–Ω–Ω–æ—Å—Ç—ñ —Ä—ñ—à–µ–Ω–Ω—è–º —Ä–∞–¥–∏', detail: '–†—ñ—à–µ–Ω–Ω—è —Ä–∞–¥–∏ –Ω–∞–±–∏—Ä–∞—î —á–∏–Ω–Ω–æ—Å—Ç—ñ –∑ –¥–∞—Ç–∏ –Ω–∞–±—Ä–∞–Ω–Ω—è —á–∏–Ω–Ω–æ—Å—Ç—ñ –Ω–∞–∫–∞–∑–æ–º –ø—Ä–æ –≤–∏–¥–∞—á—É –¥–∏–ø–ª–æ–º–∞.' },
    en: { title: 'Decision comes into force', detail: 'Board decision comes into force on the date of the University order issuing the diploma.' }
  },
  { id: 27,
    uk: { title: '–î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–ø—ñ—ó —Ä—ñ—à–µ–Ω–Ω—è –¥–æ –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó', detail: '–ü—Ä–æ—Ç—è–≥–æ–º 10 —Ä–æ–±–æ—á–∏—Ö –¥–Ω—ñ–≤ –ø—ñ—Å–ª—è –≤–∏–¥–∞—á—ñ –¥–∏–ø–ª–æ–º–∞ –¥–æ–¥–∞—î—Ç—å—Å—è –∫–æ–ø—ñ—è —Ä—ñ—à–µ–Ω–Ω—è –¥–æ –ø—Ä–∏–º—ñ—Ä–Ω–∏–∫–∞ –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó —É –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ.' },
    en: { title: 'Adding decision copy', detail: 'Within 10 working days after diploma issuance, a copy of board decision is added to dissertation in library.' }
  },
  { id: 28,
    uk: { title: '–ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è', detail: '–ê—Ç–µ—Å—Ç–∞—Ü—ñ–π–Ω–∞ —Å–ø—Ä–∞–≤–∞ –∑–¥–æ–±—É–≤–∞—á–∞ –∑ —É—Å—ñ–º–∞ –º–∞—Ç–µ—Ä—ñ–∞–ª–∞–º–∏ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º 10 —Ä–æ–∫—ñ–≤; —Ä—ñ—à–µ–Ω–Ω—è —Ä–∞–¥–∏ —Ç–∞ –æ–¥–∏–Ω –ø—Ä–∏–º—ñ—Ä–Ω–∏–∫ –¥–∏—Å–µ—Ä—Ç–∞—Ü—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ø–æ—Å—Ç—ñ–π–Ω–æ.' },
    en: { title: 'Archiving', detail: 'Candidate‚Äôs attestation file is stored for 10 years; board decision and one copy of dissertation are permanently stored.' }
  }
];

// Rendering with colors
const timeline = document.getElementById('timeline');
const searchInput = document.getElementById('search');
const langBtn = document.getElementById('lang');
const modal = document.getElementById('modal');
const modalContent = document.getElementById('modal-content');
const closeBtn = document.getElementById('close');
let lang = 'uk';

// Compute dates
function computeDates(startDate){
  let prev = new Date(startDate);
  steps.forEach(s=>{
    if(s.id===1) s.computedDate = new Date(prev);
    else {
      prev = new Date(prev.getTime() + (s.duration||0)*24*60*60*1000);
      s.computedDate = prev;
    }
  });
}

// Render function
function renderSteps(filter=''){
  timeline.innerHTML='';
  const line = document.createElement('div');
  line.className='line';
  line.setAttribute('aria-hidden','true');
  timeline.appendChild(line);

  const today = new Date();
  steps.forEach(s=>{
    const t = s[lang].title;
    const d = s[lang].detail;
    if(filter && !(t.toLowerCase().includes(filter)||d.toLowerCase().includes(filter))) return;

    const item = document.createElement('article');
    item.className='item';
    if(s.parent) item.style.paddingLeft='140px';

    let mailButton='';
    if(s.email){
      const subject = encodeURIComponent(`PhD Roadmap: Step ${s.id} ‚Äî ${t}`);
      mailButton=`<a class="btn btn--muted" href="mailto:${s.email}?subject=${subject}">–ù–∞–ø–∏—Å–∞—Ç–∏ –ª–∏—Å—Ç</a>`;
    }

    let color='#90caf9';
    if(s.computedDate){
      if(s.computedDate<today) color='#a5d6a7';
      else if(s.computedDate.toDateString()===today.toDateString()) color='#ffe082';
    }

    item.innerHTML=`
      <div class="node" aria-hidden="true" style="background:${color};border-color:#6c8ebf;">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" stroke="none"></circle>
        </svg>
      </div>
      <div class="card">
        <div class="meta">–ö—Ä–æ–∫ ${s.id}${s.parent?' (–Ω–æ—Ç–∞—Ç–∫–∞ –¥–æ –∫—Ä–æ–∫—É '+s.parent+')':''}${s.computedDate?' ‚Äî '+s.computedDate.toLocaleDateString():''}</div>
        <h3 class="title">${t}</h3>
        <p class="desc">${d.length>220?d.slice(0,220)+'‚Ä¶':d}</p>
        <div class="actions">
          <button class="btn" data-id="${s.id}">–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ</button>
          ${mailButton}
        </div>
      </div>
    `;
    timeline.appendChild(item);
    const btn = item.querySelector('button.btn');
    if(btn) btn.onclick = ()=>showModal(s);
  });
  // –ó–∞–º—ñ–Ω–∞ "–¥–∏–≤. –î–æ–¥–∞—Ç–æ–∫ 1" –Ω–∞ –∞–∫—Ç–∏–≤–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
  document.querySelectorAll('.desc').forEach(el => {
  el.innerHTML = el.innerHTML.replace(
    /–¥–∏–≤\. –î–æ–¥–∞—Ç–æ–∫ 1/g,
    '<a href="https://aspirantura.lnu.edu.ua/wp-content/uploads/2025/06/DODATKY-do-Dorozhnoi-karty-zdobuvacha.pdf" target="_blank" rel="noopener noreferrer">–¥–∏–≤. –î–æ–¥–∞—Ç–æ–∫ 1</a>'
  );
});
}

document.getElementById('prev-month').addEventListener('click', ()=>{
  if (currentMonth === null) return;
  currentMonth--;
  if (currentMonth < 0) { currentMonth = 11; currentYear--; }
  renderMonthlyCalendar(document.getElementById('seminar-date').value || new Date());
});
document.getElementById('next-month').addEventListener('click', ()=>{
  if (currentMonth === null) return;
  currentMonth++;
  if (currentMonth > 11) { currentMonth = 0; currentYear++; }
  renderMonthlyCalendar(document.getElementById('seminar-date').value || new Date());
});

let currentMonth = null;
let currentYear = null;

function renderMonthlyCalendar(baseDate) {
  const cal = document.getElementById('calendar-view');
  const title = document.getElementById('calendar-title');

  if (!steps.some(s => s.computedDate)) {
    cal.innerHTML = '<p style="color:#888;grid-column:span 7;">–°–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É —Å–µ–º—ñ–Ω–∞—Ä—É —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –¥–∞—Ç–∏".</p>';
    title.textContent = '';
    return;
  }

  const start = new Date(baseDate);
  if (currentMonth === null) {
    currentMonth = start.getMonth();
    currentYear = start.getFullYear();
  }

  // 1Ô∏è‚É£ –í–∏–∑–Ω–∞—á–∞—î–º–æ –ø–µ—Ä—à–∏–π —ñ –æ—Å—Ç–∞–Ω–Ω—ñ–π –¥–µ–Ω—å –º—ñ—Å—è—Ü—è
  const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
  const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);

  // 2Ô∏è‚É£ –ö–∞–ª–µ–Ω–¥–∞—Ä –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ –ø–æ–Ω–µ–¥—ñ–ª–∫–∞
  const startOfGrid = new Date(firstDayOfMonth);
  const day = startOfGrid.getDay(); // 0 = –Ω–µ–¥—ñ–ª—è, 1 = –ø–æ–Ω–µ–¥—ñ–ª–æ–∫
  const diffToMonday = (day === 0 ? -6 : 1 - day);
  startOfGrid.setDate(startOfGrid.getDate() + diffToMonday);

  const endOfGrid = new Date(lastDayOfMonth);
  const endDay = endOfGrid.getDay();
  const diffToSunday = (endDay === 0 ? 0 : 7 - endDay);
  endOfGrid.setDate(endOfGrid.getDate() + diffToSunday);

  // 3Ô∏è‚É£ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤ —á–µ—Ä–µ–∑ –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–∞—Ç (DST-safe)
  const totalDays = Math.round((endOfGrid - startOfGrid) / 86400000) + 1;

  const weekdays = ['–ü–Ω','–í—Ç','–°—Ä','–ß—Ç','–ü—Ç','–°–±','–ù–¥'];
  const colors = ['#42a5f5','#66bb6a','#ffb74d','#ef5350','#ab47bc','#26c6da','#8d6e63','#9ccc65','#ffa726'];

  // 4Ô∏è‚É£ –ù–∞–∑–≤–∞ –º—ñ—Å—è—Ü—è
  title.textContent = firstDayOfMonth.toLocaleString('uk-UA', { month: 'long', year: 'numeric' });

  // 5Ô∏è‚É£ –ú–∞–ª—é—î–º–æ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—É —Å—ñ—Ç–∫—É
  cal.innerHTML = '';
  weekdays.forEach(d => {
    const w = document.createElement('div');
    w.className = 'calendar-weekday';
    w.textContent = d;
    cal.appendChild(w);
  });

  for (let i = 0; i < totalDays; i++) {
    const date = new Date(startOfGrid.getFullYear(), startOfGrid.getMonth(), startOfGrid.getDate() + i); // DST-safe
    const cell = document.createElement('div');
    cell.className = 'day-cell';
    const iso = date.toISOString().split('T')[0];
    cell.dataset.date = iso;
    const isOther = date.getMonth() !== currentMonth;
    if (isOther) cell.classList.add('day-other');
    cell.innerHTML = `<span class="date">${date.getDate()}</span>`;
    cal.appendChild(cell);
  }

  // 6Ô∏è‚É£ –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø–æ–¥—ñ–π
  steps.forEach((s, i) => {
    if (!s.duration) return;
    const color = colors[i % colors.length];
    const end = s.computedDate;
    const startEv = new Date(end.getFullYear(), end.getMonth(), end.getDate() - s.duration);

    for (let d = new Date(startEv); d <= end; d.setDate(d.getDate() + 1)) {
      const iso = d.toISOString().split('T')[0];
      const cell = cal.querySelector(`[data-date="${iso}"]`);
      if (cell) {
        const ev = document.createElement('div');
        ev.className = 'event';
        ev.style.background = color;
        ev.textContent = `${s.id}. ${s[lang].title}`;
        ev.title = `${s[lang].title}\n${startEv.toLocaleDateString()} ‚Üí ${end.toLocaleDateString()}`;
        cell.appendChild(ev);
      }
    }
  });
}


// Modal
function showModal(step){
  modalContent.innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <span class="badge">–ö—Ä–æ–∫ ${step.id}</span>
        <strong style="font-size:18px">${step[lang].title}</strong>
      </div>
    </div>
    <hr style="margin:12px 0">
    <div style="font-size:15px;line-height:1.45">${step[lang].detail}</div>
  `;
  modal.style.display='flex';
  modal.setAttribute('aria-hidden','false');
}

// Events
searchInput.addEventListener('input', e=> renderSteps(e.target.value.trim().toLowerCase()));
langBtn.addEventListener('click', ()=>{
  lang=(lang==='uk')?'en':'uk';
  langBtn.textContent=lang==='uk'?'EN':'UK';
  renderSteps(searchInput.value.trim().toLowerCase());
});
closeBtn.addEventListener('click', ()=>{ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); });
modal.addEventListener('click', e=>{ if(e.target===modal){ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); } });
document.getElementById('print').addEventListener('click', ()=> window.print());

// Date calendar
document.getElementById('set-dates').addEventListener('click', ()=>{
  const input = document.getElementById('seminar-date').value;
  if(!input) return alert('–û–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É —Å–µ–º—ñ–Ω–∞—Ä—É!');
  computeDates(input);
renderSteps();
renderMonthlyCalendar(input);
});

// Initial render
renderSteps();
</script>
</body>
</html>
