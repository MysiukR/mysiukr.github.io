<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Дорожня карта PhD</title>
  <style>
    :root{--bg:#f6f9fc;--card:#fff;--accent:#6c8ebf;--muted:#6b7280}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; background:var(--bg); margin:0; padding:32px; color:#111}
    .container{max-width:900px;margin:0 auto;}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;flex-wrap:wrap}
    h1{font-size:20px;margin:0; flex:1}
    .controls{display:flex;gap:8px;align-items:center;margin-top:8px;}
    button, .btn{background:var(--accent);border:none;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    .btn--muted{background:#e6eef9;color:#123}
    .timeline{position:relative;padding:10px 0 40px;}
    .line{position:absolute;left:48px;top:0;bottom:0;width:4px;background:linear-gradient(#6c8ebf,#9fb9e6);border-radius:2px}
    .item{position:relative;padding:18px 18px 18px 96px; margin-bottom:18px;background:transparent;}
    .node{position:absolute;left:24px;top:18px;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#fff;border:3px solid var(--accent);box-shadow:0 2px 6px rgba(20,40,80,0.06)}
    .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(20,40,80,0.06);}
    .meta{font-size:13px;color:var(--muted);margin-bottom:6px}
    .title{font-weight:700;margin:0 0 6px 0}
    .desc{margin:0;color:#333;white-space:pre-wrap}
    .actions{margin-top:10px;display:flex;gap:8px}
    .search{padding:8px 10px;border-radius:8px;border:1px solid #d7e4f5;width:340px}
    .lang-toggle{padding:6px 8px;border-radius:8px;border:1px solid #d7e4f5;background:#e6eef9; color: #123; cursor:pointer}
    footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}
    .highlight{background:linear-gradient(90deg,#fffbe6,#fff);padding:6px;border-radius:8px}
    .btn.btn--muted {text-decoration: none;font-size: 14px; color: #123;}
    input[type="date"]{padding:6px;border-radius:8px;border:1px solid #d7e4f5}
    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(8,12,20,0.45);z-index:50;padding:20px}
    .modal .dialog{max-width:780px;width:100%;background:#fff;border-radius:12px;padding:18px;box-shadow:0 24px 60px rgba(10,20,40,0.5)}
    .close{float:right;background:#eee;border-radius:8px;padding:6px;cursor:pointer;border:none}
    .badge{display:inline-block;background:#eef6ff;color:#135; padding:6px 8px;border-radius:999px;font-weight:700;font-size:13px;margin-right:8px}
    .desc a { background-color: #d7e4f5; color: #6c8ebf; padding: 1px 3px; border-radius: 6px; font-size: 14px; text-decoration: none; font-weight: 500; transition: background 0.2s, color 0.2s; }
    .desc a:hover { background-color: #cfe0f8; color: #123;}
    .calendar-header {
    display:flex;
    justify-content:center;
    align-items:center;
    gap:8px;
    margin-bottom:8px;
  }
  .calendar-view {
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    gap:4px;
    background:#fff;
    border-radius:12px;
    padding:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.05);
  }
  .calendar-weekday {
    text-align:center;
    font-weight:700;
    padding-bottom:6px;
    font-size:13px;
    color:#333;
  }
  .day-cell {
    min-height:90px;
    border:1px solid #e0e6ef;
    border-radius:8px;
    padding:4px;
    font-size:12px;
    position:relative;
    overflow:hidden;
  }
  .day-cell span.date {
    font-weight:700;
    color:#444;
    font-size:12px;
  }
  .event {
    display:block;
    font-size:11px;
    padding:2px 4px;
    margin-top:2px;
    border-radius:4px;
    color:#fff;
    overflow:hidden;
    white-space:nowrap;
    text-overflow:ellipsis;
  }
  .day-other {
    opacity:0.4;
  }
  .controls { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; justify-content: flex-start; margin-bottom: 12px; }
  .controls input, .controls button { flex-shrink: 0;}
  .search { flex: 1 1 160px; min-width: 120px; }
  header { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 20px;margin-bottom: 18px; }
  header h1 { font-size: 20px; margin: 0; line-height: 1.4; }
  @media (max-width:640px){.line{left:28px}.item{padding-left:76px}.node{left:6px} .search{width:160px}}
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1 id = "titleName">
      «ДОРОЖНЯ КАРТА»
      <br>
      здобувача ступеня доктора філософії
      <br>
      до захисту дисертації у разовій спеціалізованій вченій раді
    </h1>
    <br>
    <div class="controls">
      <input id="search" class="search" placeholder="Пошук етапу…" />
      <label id="label-data">Дата семінару: </label>
      <input type="date" id="seminar-date" title="Дата семінару" />
      <button id="print" class="btn">Друк</button>
      <button id="lang" class="lang-toggle">EN</button>
    </div>
  </header>

  <main>
    <h2 id = "calendarTitle" style="margin-top:40px;">Календар графіків подання документів</h2>
<div class="calendar-header">
  <button id="prev-month" class="btn btn--muted">←</button>
  <span id="calendar-title" style="font-weight:700;font-size:16px"></span>
  <button id="next-month" class="btn btn--muted">→</button>
</div>
<div id="calendar-view" class="calendar-view"></div>

    <section class="timeline" id="timeline">
      <div class="line" aria-hidden="true"></div>
    </section>
  </main>

  <footer>
    Built from the submitted roadmap. Click a step to view details. Use EN toggle to switch language.
  </footer>
</div>

<!-- modal for details -->
<div id="modal" class="modal" role="dialog" aria-hidden="true">
  <div class="dialog" role="document">
    <button id="close" class="close">✕</button>
    <div id="modal-content"></div>
  </div>
</div>

<script>
const steps = [
  { id: 1, email: 'olha.zhak@lnu.edu.ua',
    uk: { title: 'Разова рада утворюється закладом', detail: 'Разова рада утворюється закладом, в якому здобувач виконав акредитовану освітньонаукову програму.' },
    en: { title: 'Formation of the one-time board', detail: 'The one-time board is formed by the institution where the candidate completed the accredited educational and research program.' }
  },
  { id: 2,  parent: 1,
    uk: { title: 'Переведення до іншого закладу', detail: 'Здобувач, який виконує неакредитовану освітньо-наукову програму, має право у порядку, встановленому законодавством, на переведення до іншого закладу, який має акредитовану освітньо-наукову програму за відповідною спеціальністю.' },
    en: { title: 'Transfer to another institution', detail: 'Candidates enrolled in a non-accredited program have the right to transfer to an institution with an accredited educational and research program in the corresponding specialty.' }
  },
  { id: 3,  email: 'postgraduate.dep@lnu.edu.ua',
    uk: { title: 'Отримання довідки про виконання програми', detail: 'Здобувач, який виконав акредитовану освітньо-наукову програму, склав усі заліки та іспити, звертається до відділу аспірантури і докторантури для отримання довідки про виконання освітньо-наукової програми.' },
    en: { title: 'Obtaining certificate of completion', detail: 'The candidate who completed the accredited program applies to the postgraduate department to obtain a certificate of program completion.' }
  },
  {
  id: 4,
  uk: { title: 'Підготовка дисертації', detail: 'Здобувач готує рукопис дисертації у друкованому та електронному вигляді, анотацію до неї (згідно з вимогами Міністерства освіти та науки України), перелік та копії наукових статей (див. Додаток 1), де опубліковано основні результати дисертаційного дослідження, та отримує висновок наукового керівника (керівників).' },
  en: { title: 'Dissertation preparation', detail: 'Candidate prepares the dissertation manuscript in print and electronic formats, an abstract according to the Ministry of Education and Science of Ukraine requirements, a list and copies of publications (see Appendix 1) presenting the main results of the dissertation research, and obtains the supervisor’s review.'}
  },
  { id: 5, parent: 4,
    uk: { title: 'Використання власних наукових праць', detail: 'Не вважається самоплагіатом використання здобувачем своїх наукових праць у тексті дисертації без посилання на ці праці, якщо вони попередньо опубліковані з метою висвітлення основних результатів.' },
    en: { title: 'Use of own publications', detail: 'Using one’s own previously published works in the dissertation is not considered self-plagiarism if the main results are highlighted and included in the abstract.' }
  },
  { id: 6,
    uk: { title: 'Звернення до декана', detail: 'Здобувач звертається до декана з письмовою заявою щодо отримання висновку про наукову новизну; додаються дисертація, анотація, публікації, висновок наукового керівника, довідка про виконання програми.' },
    en: { title: 'Submission to the Dean', detail: 'Candidate submits an application to the Dean to obtain conclusion on novelty; includes dissertation, abstract, publications, supervisor’s review, certificate of completion.' }
  },
  { id: 7,
    uk: { title: 'Публічна презентація на кафедрі', detail: 'Публічна презентація здобувачем наукових результатів дисертації та її обговорення відбуваються на засіданні кафедри.' },
    en: { title: 'Department presentation', detail: 'Candidate presents research results publicly at the Department meeting and discussion is held.' }
  },
  { id: 8, duration:14,
    uk: { title: 'Звернення до вченої ради', detail: 'За умови позитивного висновку здобувач звертається до вченої ради з заявою про утворення разової ради та додає документи.' },
    en: { title: 'Academic Council submission', detail: 'Upon positive conclusion, candidate applies to Academic Council for creation of one-time board with supporting documents.' }
  },
  { id: 9, parent: 8, duration:60,
    uk: { title: 'Пропозиції складу ради', detail: 'Пропозиції щодо складу разової ради подає структурний підрозділ, на засіданні якого була презентація.' },
    en: { title: 'Board composition proposals', detail: 'Department proposes personal composition of the board at the meeting where the presentation took place.' }
  },
  { id: 10,
    uk: { title: 'Перевірка НДЧ', detail: 'Вчений секретар перевіряє відповідність наукового доробку членів ради вимогам Порядку та відсутність порушень академічної доброчесності.' },
    en: { title: 'Secretary verification', detail: 'Research secretary verifies board members’ compliance with regulations and absence of academic misconduct.' }
  },
  { id: 11,
    uk: { title: 'Утворення разової ради', detail: 'Вчена рада утворює разову спеціалізовану раду у складі п’яти осіб і видає наказ.' },
    en: { title: 'Board formation', detail: 'Academic Council forms one-time board of five members and issues an official order.' }
  },
  { id: 12, parent: 11,
    uk: { title: 'Офіційні опоненти', detail: 'Офіційні опоненти не можуть працювати в одному закладі та мають письмову згоду на участь у раді.' },
    en: { title: 'Official opponents', detail: 'Official opponents cannot work at the same institution and must give written consent to participate.' }
  },
  { id: 13, duration: 5,
    uk: { title: 'Оприлюднення матеріалів', detail: 'Протягом п’яти днів після наказу матеріали розміщуються на сайті та в системах.' },
    en: { title: 'Publication of materials', detail: 'Within five days of the order, materials are published on website and in information systems.' }
  },
  { id: 14, duration: 30,
    uk: { title: 'Перевірка МОН', detail: 'Міністерство перевіряє відповідність складу разової ради протягом місяця.' },
    en: { title: 'Ministry verification', detail: 'Ministry of Education checks board composition compliance within one month.' }
  },
  { id: 15, duration: 45,
    uk: { title: 'Рецензії та відгуки', detail: 'Рецензенти та офіційні опоненти подають рецензії та відгуки протягом 45 днів після оприлюднення.' },
    en: { title: 'Reviewers reports', detail: 'Reviewers and official opponents submit reports and feedback within 45 days after publication.' }
  },
  { id: 16, duration: 3,
    uk: { title: 'Призначення дати захисту', detail: 'Разова рада призначає дату, час і місце захисту протягом трьох робочих днів після отримання останньої рецензії.' },
    en: { title: 'Scheduling defense', detail: 'Board schedules date, time, and place of defense within three working days after last review is received.' }
  },
  { id: 17,
    uk: { title: 'Публічний захист', detail: 'Публічний захист проводиться на засіданні разової ради за умови участі повного складу.' },
    en: { title: 'Public defense', detail: 'Public defense held at board meeting with full board participation.' }
  },
  { id: 18, parent: 17,
    uk: { title: 'Відсутність кворуму', detail: 'У разі відсутності кворуму дата захисту переноситься не раніше ніж через 2 тижні та не пізніше ніж через 4 тижні.' },
    en: { title: 'No quorum', detail: 'If quorum is missing, defense date is rescheduled between 2–4 weeks from previous date.' }
  },
  { id: 19,
    uk: { title: 'Трансляція захисту', detail: 'Університет забезпечує трансляцію та відеозапис захисту дисертації.' },
    en: { title: 'Defense streaming', detail: 'University provides live streaming and recording of the dissertation defense.' }
  },
  { id: 20,
    uk: { title: 'Процедура захисту', detail: 'Засідання проводиться за процедурою Університету, захист має характер відкритої дискусії.' },
    en: { title: 'Defense procedure', detail: 'Meeting follows University procedure; defense is an open scientific discussion.' }
  },
  { id: 21,
    uk: { title: 'Рішення разової ради', detail: 'За результатами голосування оформлюється рішення про присудження або відмову.' },
    en: { title: 'Board decision', detail: 'Decision on awarding or refusal is issued based on voting results.' }
  },
  { id: 22, parent: 21,
    uk: { title: 'Зняття дисертації із захисту', detail: 'Здобувач має право до початку голосування зняти дисертацію із захисту, крім випадків порушення академічної доброчесності.' },
    en: { title: 'Withdrawal of dissertation', detail: 'Candidate may withdraw dissertation before voting, except in cases of academic misconduct.' }
  },
  { id: 23, parent: 21,
    uk: { title: 'Факти академічного плагіату', detail: 'Якщо виявлено факти плагіату, заяву про зняття дисертації не приймають, рада відмовляє у присудженні.' },
    en: { title: 'Academic misconduct', detail: 'If plagiarism or falsification is found, withdrawal is denied; board refuses degree awarding.' }
  },
  { id: 24,
    uk: { title: 'Оприлюднення рішення', detail: 'Протягом трьох робочих днів оприлюднюється рішення разової ради та відеозапис трансляції захисту.' },
    en: { title: 'Publication of decision', detail: 'Within three working days, board decision and defense recording are published.' }
  },
  { id: 25, duration: 15,
    uk: { title: 'Наказ про видачу диплома', detail: 'Університет видає наказ про видачу диплома доктора філософії протягом 15–30 календарних днів.' },
    en: { title: 'Order and diploma issuance', detail: 'University issues order for PhD diploma within 15–30 calendar days.' }
  },
  { id: 26,
    uk: { title: 'Набрання чинності рішенням ради', detail: 'Рішення ради набирає чинності з дати набрання чинності наказом про видачу диплома.' },
    en: { title: 'Decision comes into force', detail: 'Board decision comes into force on the date of the University order issuing the diploma.' }
  },
  { id: 27,
    uk: { title: 'Додавання копії рішення до дисертації', detail: 'Протягом 10 робочих днів після видачі диплома додається копія рішення до примірника дисертації у бібліотеці.' },
    en: { title: 'Adding decision copy', detail: 'Within 10 working days after diploma issuance, a copy of board decision is added to dissertation in library.' }
  },
  { id: 28,
    uk: { title: 'Архівування', detail: 'Атестаційна справа здобувача з усіма матеріалами зберігається протягом 10 років; рішення ради та один примірник дисертації зберігаються постійно.' },
    en: { title: 'Archiving', detail: 'Candidate’s attestation file is stored for 10 years; board decision and one copy of dissertation are permanently stored.' }
  }
];

// Rendering with colors
const timeline = document.getElementById('timeline');
const searchInput = document.getElementById('search');
const langBtn = document.getElementById('lang');
const modal = document.getElementById('modal');
const modalContent = document.getElementById('modal-content');
const closeBtn = document.getElementById('close');
let lang = 'uk';

// Compute dates
function computeDates(startDate){
  let prev = new Date(startDate);
  steps.forEach(s=>{
    if(s.id===1) s.computedDate = new Date(prev);
    else {
      prev = new Date(prev.getTime() + (s.duration||0)*24*60*60*1000);
      s.computedDate = prev;
    }
  });
}

// Render function
function renderSteps(filter=''){
  timeline.innerHTML='';
  const line = document.createElement('div');
  line.className='line';
  line.setAttribute('aria-hidden','true');
  timeline.appendChild(line);

  const today = new Date();
  steps.forEach(s=>{
    const t = s[lang].title;
    const d = s[lang].detail;
    if(filter && !(t.toLowerCase().includes(filter)||d.toLowerCase().includes(filter))) return;

    const item = document.createElement('article');
    item.className='item';
    if(s.parent) item.style.paddingLeft='140px';

    let mailButton='';
    if(s.email){
      const subject = encodeURIComponent(`PhD Roadmap: Step ${s.id} — ${t}`);
      mailButton=`<a class="btn btn--muted" href="mailto:${s.email}?subject=${subject}">Написати лист</a>`;
    }

    let color='#90caf9';
    if(s.computedDate){
      if(s.computedDate<today) color='#a5d6a7';
      else if(s.computedDate.toDateString()===today.toDateString()) color='#ffe082';
    }

    item.innerHTML=`
      <div class="node" aria-hidden="true" style="background:${color};border-color:#6c8ebf;">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" stroke="none"></circle>
        </svg>
      </div>
      <div class="card">
        <div class="meta">Крок ${s.id}${s.parent?' (нотатка до кроку '+s.parent+')':''}${s.computedDate?' — '+s.computedDate.toLocaleDateString():''}</div>
        <h3 class="title">${t}</h3>
        <p class="desc">${d.length>220?d.slice(0,220)+'…':d}</p>
        <div class="actions">
          <button class="btn" data-id="${s.id}">Детальніше</button>
          ${mailButton}
        </div>
      </div>
    `;
    timeline.appendChild(item);
    const btn = item.querySelector('button.btn');
    if(btn) btn.onclick = ()=>showModal(s);
  });
  // Заміна "див. Додаток 1" на активне посилання
  document.querySelectorAll('.desc').forEach(el => {
  el.innerHTML = el.innerHTML.replace(
    /див\. Додаток 1/g,
    '<a href="https://aspirantura.lnu.edu.ua/wp-content/uploads/2025/06/DODATKY-do-Dorozhnoi-karty-zdobuvacha.pdf" target="_blank" rel="noopener noreferrer">див. Додаток 1</a>'
  );
});
}

document.getElementById('prev-month').addEventListener('click', ()=>{
  if (currentMonth === null) return;
  currentMonth--;
  if (currentMonth < 0) { currentMonth = 11; currentYear--; }
  renderMonthlyCalendar(document.getElementById('seminar-date').value || new Date());
});
document.getElementById('next-month').addEventListener('click', ()=>{
  if (currentMonth === null) return;
  currentMonth++;
  if (currentMonth > 11) { currentMonth = 0; currentYear++; }
  renderMonthlyCalendar(document.getElementById('seminar-date').value || new Date());
});

let currentMonth = null;
let currentYear = null;

function renderMonthlyCalendar(baseDate) {
  const cal = document.getElementById('calendar-view');
  const title = document.getElementById('calendar-title');

  if (!steps.some(s => s.computedDate)) {
    cal.innerHTML = '<p style="color:#888;grid-column:span 7;">Спочатку оберіть дату семінару і натисніть "Розрахувати дати".</p>';
    title.textContent = '';
    return;
  }

  const start = new Date(baseDate);
  if (currentMonth === null) {
    currentMonth = start.getMonth();
    currentYear = start.getFullYear();
  }

  // 1️⃣ Визначаємо перший і останній день місяця
  const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
  const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);

  // 2️⃣ Календар починається з понеділка
  const startOfGrid = new Date(firstDayOfMonth);
  const day = startOfGrid.getDay(); // 0 = неділя, 1 = понеділок
  const diffToMonday = (day === 0 ? -6 : 1 - day);
  startOfGrid.setDate(startOfGrid.getDate() + diffToMonday);

  const endOfGrid = new Date(lastDayOfMonth);
  const endDay = endOfGrid.getDay();
  const diffToSunday = (endDay === 0 ? 0 : 7 - endDay);
  endOfGrid.setDate(endOfGrid.getDate() + diffToSunday);

  // 3️⃣ Кількість днів через нормалізацію дат (DST-safe)
  const totalDays = Math.round((endOfGrid - startOfGrid) / 86400000) + 1;

  const weekdays = ['Пн','Вт','Ср','Чт','Пт','Сб','Нд'];
  const colors = ['#42a5f5','#66bb6a','#ffb74d','#ef5350','#ab47bc','#26c6da','#8d6e63','#9ccc65','#ffa726'];

  title.textContent = (lang === 'uk')
  ? firstDayOfMonth.toLocaleString('uk-UA', { month: 'long', year: 'numeric' })
  : firstDayOfMonth.toLocaleString('en-US', { month: 'long', year: 'numeric' });

  // 5️⃣ Малюємо календарну сітку
  cal.innerHTML = '';
  weekdays.forEach(d => {
    const w = document.createElement('div');
    w.className = 'calendar-weekday';
    w.textContent = d;
    cal.appendChild(w);
  });

  for (let i = 0; i < totalDays; i++) {
    const date = new Date(startOfGrid.getFullYear(), startOfGrid.getMonth(), startOfGrid.getDate() + i); // DST-safe
    const cell = document.createElement('div');
    cell.className = 'day-cell';
    const iso = date.toISOString().split('T')[0];
    cell.dataset.date = iso;
    const isOther = date.getMonth() !== currentMonth;
    if (isOther) cell.classList.add('day-other');
    cell.innerHTML = `<span class="date">${date.getDate()}</span>`;
    cal.appendChild(cell);
  }

  // 6️⃣ Заповнення подій
  steps.forEach((s, i) => {
    if (!s.duration) return;
    const color = colors[i % colors.length];
    const end = s.computedDate;
    const startEv = new Date(end.getFullYear(), end.getMonth(), end.getDate() - s.duration);

    for (let d = new Date(startEv); d <= end; d.setDate(d.getDate() + 1)) {
      const iso = d.toISOString().split('T')[0];
      const cell = cal.querySelector(`[data-date="${iso}"]`);
      if (cell) {
        const ev = document.createElement('div');
        ev.className = 'event';
        ev.style.background = color;
        ev.textContent = `${s.id}. ${s[lang].title}`;
        ev.title = `${s[lang].title}\n${startEv.toLocaleDateString()} → ${end.toLocaleDateString()}`;
        cell.appendChild(ev);
      }
    }
  });
}


// Modal
function showModal(step){
  modalContent.innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <span class="badge">Крок ${step.id}</span>
        <strong style="font-size:18px">${step[lang].title}</strong>
      </div>
    </div>
    <hr style="margin:12px 0">
    <div style="font-size:15px;line-height:1.45">${step[lang].detail}</div>
  `;
  modal.style.display='flex';
  modal.setAttribute('aria-hidden','false');
}

// Events
const printBtn = document.getElementById('print');
const labelData = document.getElementById('label-data');
const titleName = document.getElementById('titleName');
const calendarTitle = document.getElementById('calendarTitle');
const title = document.getElementById('calendar-title');
searchInput.addEventListener('input', e=> renderSteps(e.target.value.trim().toLowerCase()));
langBtn.addEventListener('click', ()=>{
  lang=(lang==='uk')?'en':'uk';
  langBtn.textContent=lang==='uk'?'EN':'UK';
  printBtn.textContent = (lang === 'uk') ? 'Друк' : 'Print';
  labelData.textContent = (lang === 'uk') ? 'Дата семінару: ' : 'Seminar date: ';
  calendarTitle.innerHTML = (lang === 'uk') ? 'Календар графіків подання документів' : 'Document submission schedule calendar';
  titleName.innerHTML = (lang === 'uk')
  ? '«ДОРОЖНЯ КАРТА»<br>здобувача ступеня доктора філософії<br>до захисту дисертації у разовій спеціалізованій вченій раді'
  : '“ROADMAP”<br>for PhD candidates<br>towards dissertation defense in a one-time specialized council';
  const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
  title.textContent = (lang === 'uk')
  ? firstDayOfMonth.toLocaleString('uk-UA', { month: 'long', year: 'numeric' })
  : firstDayOfMonth.toLocaleString('en-US', { month: 'long', year: 'numeric' });
  searchInput.placeholder = (lang === 'uk') ? 'Пошук етапу…' : 'Search step…';

  renderSteps(searchInput.value.trim().toLowerCase());
});
closeBtn.addEventListener('click', ()=>{ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); });
modal.addEventListener('click', e=>{ if(e.target===modal){ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); } });
document.getElementById('print').addEventListener('click', ()=> window.print());

document.addEventListener('DOMContentLoaded', () => {
  const dateInput = document.getElementById('seminar-date');
  const today = new Date();
  const yyyy = today.getFullYear();
  const mm = String(today.getMonth() + 1).padStart(2, '0');
  const dd = String(today.getDate()).padStart(2, '0');
  dateInput.value = `${yyyy}-${mm}-${dd}`; // встановлюємо поточну дату
  const input = document.getElementById('seminar-date').value;
  if(!input) return alert('Оберіть дату семінару!');
  computeDates(input);
renderSteps();
renderMonthlyCalendar(input);
});

document.getElementById('seminar-date').addEventListener('change', (e) => {
  const input = e.target.value;
  if (!input) return;
  computeDates(input);
  renderSteps();
  renderMonthlyCalendar(input);
});

// Initial render
renderSteps();
</script>
</body>
</html>
